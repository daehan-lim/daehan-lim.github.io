<!-- SEO and Social Media Meta Tags -->
<meta name="keywords"
      content="Software Developer, Mobile Development, Flutter Developer, Android Developer, Kotlin, Java, Software Engineer, Machine Learning, AI Research, Seoul, South Korea">
<meta property="og:image" content="https://englim.me/assets/preview2.png">
<meta name="twitter:image" content="https://englim.me/assets/preview2.png">
<link rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üë®‚Äçüíª</text></svg>">

<!-- Font Imports -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">

<!-- Common Styles -->
<style>
    /* Navigation Menu Base Styles */
    #nav-menu {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        width: 100% !important;
        background: linear-gradient(135deg, #3464e1 0%, #764ba2 100%) !important;
        color: white !important;
        z-index: 1000 !important;
        display: flex !important;
        justify-content: space-between !important;
        align-items: center !important;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2) !important;
    }

    /* Typography */
    h1, h2 {
        color: #6951af !important;
        font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
    }

    #nav-menu a {
        color: white !important;
        text-decoration: none !important;
        font-weight: bold !important;
        transition: color 0.3s ease !important;
    }

    #nav-menu > div:first-child a {
        font-size: 13px !important;
        margin: 0 7px !important;
        padding: 5px 11px !important;
        border-radius: 20px !important;
        background: rgba(255, 255, 255, 0.1) !important;
        transition: all 0.3s ease !important;
        font-weight: 700 !important;
        -webkit-font-smoothing: antialiased !important; /* Better text rendering */
        -moz-osx-font-smoothing: grayscale !important;
    }

    #nav-menu > div:first-child a.active {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%) !important;
        color: white !important;
    }

    #nav-menu > div:first-child a:hover {
        background: rgba(255, 255, 255, 0.25) !important; /* Brighter white overlay */
        color: white !important;
        transform: translateY(-1px) !important;
    }

    /* Home button styles */
    #home-button {
        color: white !important;
        text-decoration: none !important;
        font-weight: 700 !important;
        font-size: 13px !important;
        padding: 5px 11px !important;
        border-radius: 50% !important; /* Changed from 20px to make it circular */
        background: rgba(255, 255, 255, 0.1) !important;
        transition: all 0.3s ease !important;
        -webkit-font-smoothing: antialiased !important;
        -moz-osx-font-smoothing: grayscale !important;
        margin-right: 10px !important;
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
    }

    #home-button svg {
        width: 16px !important;
        height: 22px !important;
        fill: currentColor !important;
    }

    /* Adjust content padding for the fixed navbar */
    body {
        padding-top: 50px !important;
    }

    /* Hamburger Menu (Toggle Button) */
    #nav-menu-toggle {
        display: none !important;
        cursor: pointer !important;
        font-size: 18px !important;
        margin-right: 20px !important; /* Move to the right */
        z-index: 1100 !important; /* Ensure toggle is above menu items */
    }

    /* Navigation Links */
    #nav-links {
        display: flex !important;
        flex-wrap: wrap !important;
        padding-right: 20px !important;
    }

    @media (max-width: 768px) {
        #nav-links {
            display: none !important; /* Hide links initially on mobile */
            flex-direction: column !important;
            align-items: center !important;
            background: linear-gradient(135deg, #3464e1 0%, #764ba2 100%) !important; /* Match navbar background */
            width: 100% !important;
            position: absolute !important;
            top: 60px !important; /* Space below navbar */
            left: 0 !important;
            padding: 15px 0 !important; /* Add spacing around links */
            z-index: 1000 !important; /* Ensure it doesn't overlap the toggle button */
        }

        #nav-links.active {
            display: flex !important; /* Show links when active */
        }

        #nav-links a {
            margin: 15px 0 !important; /* Vertical spacing */
        }

        #nav-menu-toggle {
            display: block !important; /* Show hamburger menu */
        }
    }

    /*-----------------------------------------------------------------------------*/
    /* Common Project pages */

    code .nx,
    code .n,
    code .py,
    code .p {
        color: #24292e !important;
    }

    .language-plaintext.highlighter-rouge > .highlight > pre.highlight > code {
        color: #24292e !important;
    }

    code.language-plaintext.highlighter-rouge {
        color: #EB5757 !important; /* strong red text */
        border-radius: 4px !important; /* rounded corners */
        padding: 0.2em 0.4em !important; /* small breathing space */
    }

    /* Common Portfolio pages*/

    .ko {
        font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif !important;
        font-weight: 400 !important;
        word-break: keep-all !important;
        letter-spacing: -0.3px !important;
        line-height: 1.8 !important;
        font-size: 17px !important;
    }

    /* Project preview images */
    .project-preview {
        width: 100% !important; /* responsive full width of container */
        aspect-ratio: 1160 / 663 !important; /* keeps Cubadebate's ratio */
        border-radius: 8px !important;
        border: 1px solid #ddd !important;
        object-fit: cover !important; /* fills space without distortion */
    }
</style>

<!-- Common Navigation JavaScript -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const navLinksContainer = document.getElementById("nav-links");
        const toggle = document.getElementById("nav-menu-toggle");
        const headings = document.querySelectorAll("h2");

        // Remove auto-generated H1 heading completely to avoid spacing issues
        const autoGeneratedH1 = document.querySelector("h1:first-of-type");
        if (autoGeneratedH1) {
            autoGeneratedH1.remove();
        }

        // Create navigation links dynamically, excluding subheadings (###)
        headings.forEach((heading, index) => {
            if (heading.tagName === "H3") return; // Skip ### subheadings

            // Create a clean title without emojis for the nav bar
            const cleanText = heading.textContent.replace(/[\u{1F300}-\u{1FAF6}]/gu, '').trim();

            // Create an ID for each heading if not already present
            if (!heading.id) {
                heading.id = "section-" + index;
            }

            // Create navigation link
            const navLink = document.createElement("a");
            navLink.href = "#" + heading.id;
            navLink.textContent = cleanText;
            navLinksContainer.appendChild(navLink);
        });

        // Add click event for hamburger toggle
        if (toggle) {
            toggle.addEventListener("click", () => {
                navLinksContainer.classList.toggle("active");
            });
        }

        // Adjust scroll behavior to account for fixed navbar height
        const adjustScroll = (e, href) => {
            e.preventDefault();
            const target = document.querySelector(href);
            if (target) {
                window.scrollTo({
                    top: target.offsetTop - 75, // Offset for navbar height
                    behavior: 'smooth'
                });
            }
        };

        // Handle nav bar links
        document.querySelectorAll('#nav-links a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                adjustScroll(e, this.getAttribute('href'));
                navLinksContainer.classList.remove('active'); // Collapse the dropdown
            });
        });

        // Handle all markdown links with hash anchors
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                adjustScroll(e, this.getAttribute('href'));
            });
        });

        // Language button activation
        function updateLanguageButtons() {
            const currentPath = window.location.pathname;
            const enButton = document.querySelector('#nav-menu a[href="/"]:not(#home-button), #nav-menu a[href^="/projects/"]:not(#home-button)');
            const krButton = document.querySelector('#nav-menu a[href="/kr"], #nav-menu a[href^="/kr/projects/"]');

            // Remove active class from both buttons
            if (enButton) enButton.classList.remove('active');
            if (krButton) krButton.classList.remove('active');

            // Add active class based on current path
            if (currentPath.includes('/kr')) {
                if (krButton) krButton.classList.add('active');
            } else {
                if (enButton) enButton.classList.add('active');
            }
        }

        function updateHomeButton() {
            const currentPath = window.location.pathname;
            const homeButton = document.getElementById('home-button');

            if (homeButton) {
                if (currentPath.includes('/kr')) {
                    homeButton.href = '/kr';
                } else {
                    homeButton.href = '/';
                }
            }
        }

        // Update buttons on page load
        updateLanguageButtons();
        updateHomeButton();

        // Update buttons when navigation occurs (for SPAs)
        window.addEventListener('popstate', function () {
            updateLanguageButtons();
            updateHomeButton();
        });
    });
</script>